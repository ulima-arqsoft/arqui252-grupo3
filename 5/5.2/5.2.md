> [5. T√°cticas](../5.md) ‚Ä∫ [5.2. M√≥dulo 2 / Integrante 2](5.2.md)

# 5.2. M√≥dulo 2 / Integrante 2

## Escenario INV-01: Alertas y Reposici√≥n Oportuna

### Escenario

| **Cod Escenario** | **Atributo de Calidad** | **Est√≠mulo** | **Fuente del Est√≠mulo** | **Artefacto** | **Entorno** | **Respuesta** | **Medida de Respuesta** |
|-------------------|-------------------------|--------------|-------------------------|---------------|-------------|---------------|------------------------|
| INV-01 | Disponibilidad | Stock de producto cae por debajo del m√≠nimo | Sistema de ventas / almac√©n | Inventario | Producci√≥n | Notificaci√≥n + orden sugerida | Reposici√≥n sugerida en ‚â§5 min, alerta visible en dashboard |

### T√°ctica Elegida
Threshold-based Alerts + Reorder Suggestion (Lead-time aware)

### ADR

**T√≠tulo**:  
Elecci√≥n entre alertas est√°ticas vs c√°lculo din√°mico de reposici√≥n

**Contexto**:  
Las tiendas deben evitar roturas de stock en temporadas altas. Las alertas simples generan ruido o tardan en reaccionar si no consideran ventas y lead time.

**Alternativas**:
1. Alertas est√°ticas por m√≠nimo fijo.  
2. Alertas din√°micas con c√°lculo de demanda y lead time.  
3. Alerta + orden autom√°tica a proveedor.

**Criterios**:  
- Evitar faltantes en temporada alta.  
- Minimizar falsos positivos.  
- Complejidad e infraestructura.

**Decisi√≥n**:  
Usar alertas din√°micas (m√≠nimos calculados por demanda hist√≥rica y lead time) con sugerencia de reposici√≥n manual.

**Sustento**:  
C√°lculo din√°mico reduce falsos positivos y adapta m√≠nimos por temporada; mantener la acci√≥n de confirmaci√≥n humana evita pedidos incorrectos a proveedores.

---

## Escenario INV-02: Trazabilidad y Kardex

### Escenario

| **Cod Escenario** | **Atributo de Calidad** | **Est√≠mulo** | **Fuente del Est√≠mulo** | **Artefacto** | **Entorno** | **Respuesta** | **Medida de Respuesta** |
|-------------------|-------------------------|--------------|-------------------------|---------------|-------------|---------------|------------------------|
| INV-02 | Trazabilidad | Auditor√≠a / Revisi√≥n contable | Auditor interno | Kardex / Historial | Producci√≥n | Registro completo y recuperable | 100% de movimientos auditables, consultas <2s |

### T√°ctica Elegida
Logging estructurado + registros inmutables por movimiento (Kardex)

### ADR

**T√≠tulo**:  
Registro inmutable de movimientos vs logs simples para kardex

**Contexto**:  
Se requiere historial completo (entradas, salidas, ajustes) con usuario y timestamp para auditor√≠a y conciliaci√≥n.

**Alternativas**:
1. Logs en archivo plano.  
2. Tabla de movimientos transaccional en DB (audit table).  
3. Event Sourcing (event store) para reconstrucci√≥n.

**Criterios**:  
- Integridad y capacidad de reconstrucci√≥n.  
- Simplicidad de consulta.  
- Overhead operativo.

**Decisi√≥n**:  
Tabla de movimientos transaccional (kardex) con campos inmutables + hash opcional por registro; mantener opci√≥n futura de migrar a event store.

**Sustento**:  
Tabla auditada ofrece consultas simples y garantia transaccional; hashes aumentan la confianza en inmutabilidad sin la complejidad inmediata del event sourcing.

---

## Escenario INV-03: Control de Ubicaciones (Multi-warehouse y estantes)

### Escenario

| **Cod Escenario** | **Atributo de Calidad** | **Est√≠mulo** | **Fuente del Est√≠mulo** | **Artefacto** | **Entorno** | **Respuesta** | **Medida de Respuesta** |
|-------------------|-------------------------|--------------|-------------------------|---------------|-------------|---------------|------------------------|
| INV-03 | Observabilidad | Transferencia concurrente entre ubicaciones | Operador de almac√©n | Stock por ubicaci√≥n | Producci√≥n | Consistencia de stock por ubicaci√≥n | 100% consistencia en transfers, latency ‚â§500ms |

### T√°ctica Elegida
Transacciones ACID para transfers + vistas por ubicaci√≥n y cach√© eventual para lectura

### ADR

**T√≠tulo**:  
Consistencia fuerte en transfers vs consistencia eventual para consultas por ubicaci√≥n

**Contexto**:  
Movimientos f√≠sicos requieren ajuste inmediato entre ubicaciones para evitar duplicidad o p√©rdidas.

**Alternativas**:
1. Transfers con transacci√≥n centralizada (ACID).  
2. Transferencias eventual-consistent (mensajer√≠a/cola).  
3. Locking por ubicaci√≥n (pessimistic locking).

**Criterios**:  
- Precisi√≥n en stock tras transfer.  
- Rendimiento en picos.  
- Complejidad.

**Decisi√≥n**:  
Usar transacciones ACID para operaciones de transferencia y una cach√© read-optimized (por ejemplo Redis) para lecturas frecuentes; invalidaci√≥n inmediata tras commit.

**Sustento**:  
Garantiza precisi√≥n cr√≠tica en cambios de ubicaci√≥n y mantiene lectura r√°pida para UI sin comprometer integridad.

---

## Escenario INV-04: Respuesta en Punto de Venta (ventas r√°pidas y reservaciones)

### Escenario

| **Cod Escenario** | **Atributo de Calidad** | **Est√≠mulo** | **Fuente del Est√≠mulo** | **Artefacto** | **Entorno** | **Respuesta** | **Medida de Respuesta** |
|-------------------|-------------------------|--------------|-------------------------|---------------|-------------|---------------|------------------------|
| INV-04 | Rendimiento | 50 ventas simult√°neas en POS | Cajeros | Stock disponible | Temporada alta | Confirmaci√≥n de venta en <200ms, stock consistente | 99% de operaciones sin fallo por concurrencia |

### T√°ctica Elegida
Reserva temporal (hold) en cache + commit transaccional al finalizar venta

### ADR

**T√≠tulo**:  
Reserva en cache vs decrement directo en DB para ventas r√°pidas

**Contexto**:  
Ventas simult√°neas necesitan respuesta instant√°nea; decrementar directamente la DB puede provocar latencia y contenci√≥n.

**Alternativas**:
1. Decrement directo en DB con √≠ndices optimizados.  
2. Reserva temporal en cache (Redis) seguida de commit en DB.  
3. Colas de orden de venta y procesamiento secuencial.

**Criterios**:  
- Latencia por operaci√≥n.  
- Consistencia final del inventario.  
- Manejo de fallos (timeouts/cancelaciones).

**Decisi√≥n**:  
Implementar reserva temporal en Redis (TTL corto) para confirmar disponibilidad y reducir latencia; al confirmar pago se realiza commit transaccional en la DB y se elimina la reserva; en timeout la reserva expira y se libera stock.

**Sustento**:  
Reserva en cache permite respuesta r√°pida en POS y mantiene consistencia cuando se coordina con commits transaccionales; TTL y reconciliaci√≥n peri√≥dica evitan fugas de stock.

---

## Notas finales
- M√©tricas objetivo: latencias, tasa de √©xito en transfers y precisi√≥n del kardex deben ser monitoreadas y registradas.  
- Log de auditor√≠a del inventario debe integrarse con m√≥dulo de reporting para trazabilidad y conciliaci√≥n financiera.  
- Los patrones seleccionados priorizan integridad de stock y experiencia en temporadas altas.

[‚¨ÖÔ∏è Anterior](../5.1/5.1.md) | [üè† Home](../../README.md) | [Siguiente ‚û°Ô∏è](../5.3/5.3.md)
// ...existing code...
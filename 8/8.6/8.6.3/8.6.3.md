> [8. Aplicaci√≥n de Patrones Arquitecturales](../../8.md) ‚Ä∫ [8.6. Listado Consolidado](../8.6.md) ‚Ä∫ [8.6.3. Patrones de Asignaci√≥n](8.6.3.md)

# 8.6.3. Patrones de Asignaci√≥n (Deployment)

## Patrones de Distribuci√≥n y Despliegue

Esta secci√≥n documenta c√≥mo los componentes del sistema InnovaLogix se asignan a la infraestructura f√≠sica/virtual, los patrones de despliegue aplicados y las decisiones de infraestructura.

---

## 1. Tier Architecture (Arquitectura de Niveles)

**Decisi√≥n:**  
Arquitectura de 3 niveles (3-Tier) con separaci√≥n f√≠sica de componentes.

**Niveles:**

### Tier 1: Presentation Tier (Frontend)
- **Componente:** Aplicaci√≥n React (SPA + PWA)
- **Plataforma:** Vercel (CDN global)
- **Tecnolog√≠a:** React 18.2, Vite, TailwindCSS
- **Localizaci√≥n:** Edge locations de Vercel (distribuci√≥n global)

### Tier 2: Application Tier (Backend)
- **Componente:** API REST Node.js + Express
- **Plataforma:** Render (Web Service)
- **Tecnolog√≠a:** Node.js 18, Express 4.18
- **Localizaci√≥n:** us-west (Oregon)
- **Escalado:** Horizontal autom√°tico seg√∫n carga CPU

### Tier 3: Data Tier (Database)
- **Componente:** Base de datos relacional
- **Plataforma:** Render (PostgreSQL Managed)
- **Tecnolog√≠a:** PostgreSQL 15
- **Localizaci√≥n:** us-west (Oregon, misma regi√≥n que backend)
- **Storage:** 10 GB inicial, escalable

**Beneficios:**
- Escalado independiente de cada tier
- Separaci√≥n de responsabilidades f√≠sicas
- Mejora de seguridad (database no expuesta p√∫blicamente)

<!-- INSERTAR IMAGEN ACERCA DE: Diagrama de 3-Tier mostrando Vercel (frontend), Render (backend), Render (database) -->

---

## 2. Client-Server Pattern

**Aplicaci√≥n:**  
Clientes delgados (thin clients) en navegadores web, servidor centralizado procesa l√≥gica de negocio.

**Componentes:**
- **Clientes:** Navegadores web (Chrome, Firefox, Safari, Edge)
- **Servidor:** Backend Node.js en Render
- **Protocolo:** HTTPS (TLS 1.3)

**Ventajas del thin client:**
- Sin instalaci√≥n local requerida
- Actualizaciones autom√°ticas (despliegue en Vercel)
- Acceso desde cualquier dispositivo con navegador
- Menor costo de mantenimiento

**Consideraciones:**
- Requiere conexi√≥n a Internet (mitigado con PWA offline-first)
- Performance depende de latencia de red

---

## 3. CDN (Content Delivery Network)

**Aplicaci√≥n:**  
Distribuci√≥n de assets est√°ticos del frontend mediante CDN de Vercel.

**Assets distribuidos:**
- JavaScript bundles (React, librer√≠as)
- CSS compilado (TailwindCSS)
- Im√°genes, iconos, fuentes
- Service Worker (para PWA)

**Edge Locations:**
- Vercel tiene 100+ edge locations globales
- Per√∫: Santiago (Chile) como edge m√°s cercano
- Latencia t√≠pica: 20-30ms desde Lima

**Beneficios:**
- Carga inicial r√°pida (< 2 segundos)
- Reducci√≥n de carga en servidor backend
- Alta disponibilidad (redundancia geogr√°fica)

---

## 4. Database Replication (Backup)

**Aplicaci√≥n:**  
PostgreSQL Managed de Render con backups autom√°ticos diarios.

**Estrategia de backup:**
- **Frecuencia:** Backup completo diario a las 2:00 AM (hora servidor)
- **Retenci√≥n:** 7 d√≠as de backups (plan Standard)
- **Localizaci√≥n:** S3 de AWS en misma regi√≥n
- **RTO (Recovery Time Objective):** < 1 hora
- **RPO (Recovery Point Objective):** < 24 horas

**Consideraciones futuras:**
- Implementar Read Replica para separar queries de reportes
- Considerar Point-in-Time Recovery para RPO < 1 hora

---

## 5. Load Balancing

**Aplicaci√≥n:**  
Render proporciona load balancing autom√°tico entre instancias del backend.

**Configuraci√≥n:**
- **Algoritmo:** Round-robin con health checks
- **Health checks:** Endpoint `/health` cada 30 segundos
- **Umbral de escalado:** CPU > 70% por 5 minutos ‚Üí agregar instancia
- **M√°ximo de instancias:** 3 (plan actual)

**Beneficios:**
- Alta disponibilidad (si una instancia falla, otras contin√∫an)
- Distribuci√≥n de carga durante picos de ventas

---

## 6. Deployment Pipeline (CI/CD)

**Herramientas:**
- **Source Control:** GitHub (repositorio privado)
- **CI/CD:** GitHub Actions + Vercel/Render auto-deploy

**Pipeline de Frontend (Vercel):**
1. Push a rama `main` en GitHub
2. Vercel detecta cambio autom√°ticamente
3. Build de React (Vite)
4. Tests (si configurados)
5. Deploy a producci√≥n (edge locations)
6. Duraci√≥n total: ~2 minutos

**Pipeline de Backend (Render):**
1. Push a rama `main` en GitHub
2. Render detecta cambio autom√°ticamente
3. Build de Node.js (npm install)
4. Tests (si configurados)
5. Deploy con zero-downtime (rolling deployment)
6. Duraci√≥n total: ~3 minutos

**Ventajas:**
- Deploy autom√°tico en cada push
- Rollback r√°pido a versiones anteriores
- Preview deployments para branches

---

## Diagrama de Asignaci√≥n

```
[Clientes (Navegadores)]
         ‚Üì HTTPS
    [Vercel CDN]
    (Edge Locations)
         ‚Üì HTTPS
   [Render Backend]
   (Node.js + Express)
         ‚Üì PostgreSQL Protocol
  [Render PostgreSQL]
  (Database + Backups)
```

<!-- INSERTAR IMAGEN ACERCA DE: Diagrama de deployment mostrando distribuci√≥n geogr√°fica de componentes -->

---

## Resumen de Infraestructura

| Componente | Plataforma | Regi√≥n | Escalado | Costo Mensual (USD) |
|-----------|-----------|--------|----------|---------------------|
| Frontend (React) | Vercel | Global (CDN) | Autom√°tico | $0 (Hobby) |
| Backend (Node.js) | Render | us-west | Horizontal (max 3) | $25 (Standard) |
| Database (PostgreSQL) | Render | us-west | Vertical | $20 (Standard 10GB) |
| **Total** | - | - | - | **$45/mes** |

---

[‚¨ÖÔ∏è Anterior](../8.6.2/8.6.2.md) | [üè† Home](../../../README.md) | [Siguiente ‚û°Ô∏è](../8.6.4/8.6.4.md)
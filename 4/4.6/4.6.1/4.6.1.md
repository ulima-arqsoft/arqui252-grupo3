> [4. Decisiones Iniciales de Arquitectura](../../4.md) ‚Ä∫ [4.6. Listado Consolidado](../4.6.md) ‚Ä∫ [4.6.1. Asignaci√≥n de Responsabilidades](4.6.1.md)

# 4.6.1. Asignaci√≥n de Responsabilidades

---

## Decisi√≥n General 1: Elecci√≥n de Arquitectura
**T√≠tulo:**  
Elecci√≥n entre arquitectura monol√≠tica y de microservicios

**Contexto:**  
El proyecto **InnovaLogix Retail ERP** requiere una arquitectura base que soporte m√≥dulos funcionales como Ventas R√°pidas, Inventario, Compras, Reportes y CRM.  
El sistema debe ofrecer escalabilidad, facilidad de mantenimiento y coherencia tecnol√≥gica, considerando que ser√° implementado inicialmente en un entorno de tama√±o mediano (tienda retail de art√≠culos outdoor), con potencial de expansi√≥n a m√∫ltiples sucursales.

**Alternativas:**
- **Microservicios independientes:** cada m√≥dulo se desarrolla y despliega de manera aut√≥noma, lo que ofrece resiliencia, pero implica mayor complejidad operativa y costos iniciales elevados.
- **Monolito modular en capas:** una sola aplicaci√≥n estructurada por dominios (ventas, inventario, compras, etc.) y capas (presentaci√≥n, l√≥gica, datos), m√°s simple de desarrollar y desplegar, con posibilidad de migrar a microservicios en el futuro.

**Criterios de elecci√≥n:**
- Escalabilidad progresiva.
- Facilidad de desarrollo e integraci√≥n.
- Mantenibilidad del c√≥digo.
- Rapidez de despliegue y entrega.
- Viabilidad para migrar a microservicios.

**Decisi√≥n:**  
Se adopta una **arquitectura monol√≠tica modular por capas**, preparada para escalar y desacoplar m√≥dulos en futuras versiones.

**Sustento:**  
Permite un desarrollo r√°pido y ordenado, con separaci√≥n clara entre dominios funcionales (SalesService, InventoryService, PurchaseService, ReportService, CRMService).  
Cada m√≥dulo mantiene independencia l√≥gica interna, facilitando la transici√≥n gradual hacia microservicios cuando el negocio crezca o requiera escalabilidad horizontal.

---

## Decisi√≥n General 2: Distribuci√≥n Frontend / Backend
**T√≠tulo:**  
Distribuci√≥n de responsabilidades entre frontend y backend

**Contexto:**  
El sistema utiliza **React** para el frontend y **Node.js / Express** para el backend, desplegados por separado en **Vercel** y **Render** respectivamente.  
Se requiere definir los l√≠mites de responsabilidad para asegurar una interacci√≥n eficiente, segura y mantenible.

**Alternativas:**
- **Frontend grueso:** gran parte de la l√≥gica en el cliente; backend limitado a proveer datos.
- **Backend grueso:** toda la l√≥gica en el servidor; frontend con m√≠nima interacci√≥n.
- **Enfoque h√≠brido desacoplado (API-driven):** frontend se centra en la experiencia de usuario y validaciones visuales; backend gestiona autenticaci√≥n, negocio y persistencia.

**Criterios de elecci√≥n:**
- Separaci√≥n de responsabilidades.
- Seguridad (JWT, RBAC).
- Interactividad moderna (SPA).
- Buenas pr√°cticas cliente-servidor.
- Escalabilidad modular.

**Decisi√≥n:**  
Se adopta un **enfoque h√≠brido desacoplado**, con frontend responsable de la experiencia e interacciones, y backend encargado de la l√≥gica cr√≠tica y la seguridad.

**Sustento:**  
Este modelo permite aprovechar las capacidades interactivas de React, manteniendo la l√≥gica sensible y las reglas de negocio dentro del backend.  
El uso de **JWT sin estado** garantiza una arquitectura segura y f√°cilmente extensible para futuras integraciones m√≥viles o de escritorio.

---

## M√≥dulo 01 ‚Äì Ventas R√°pidas
**Decisi√≥n 1:**  
**T√≠tulo:**  
Coordinaci√≥n entre frontend y backend para registro de ventas y emisi√≥n de comprobantes

**Contexto:**  
El m√≥dulo de Ventas R√°pidas gestiona transacciones, emisi√≥n de boletas/facturas y sincronizaci√≥n con el inventario. Es necesario definir c√≥mo manejar la comunicaci√≥n entre el punto de venta (frontend) y el sistema central (backend).

**Alternativas:**
- **Procesamiento local:** el frontend realiza c√°lculos y genera comprobantes.
- **Procesamiento centralizado:** el backend valida, registra y emite comprobantes.
- **Modelo mixto (con cach√© offline):** el frontend opera offline y sincroniza ventas con el backend cuando hay conexi√≥n.

**Criterios de elecci√≥n:**
- Integridad de los datos.
- Continuidad operativa (offline).
- Seguridad en la facturaci√≥n.
- Velocidad de respuesta.

**Decisi√≥n:**  
Se adopta un **modelo mixto**, donde el frontend puede operar temporalmente sin conexi√≥n, pero el backend centraliza el registro y emisi√≥n de comprobantes.

**Sustento:**  
La soluci√≥n equilibra rapidez y confiabilidad: las ventas pueden registrarse en modo offline (IndexedDB) y sincronizarse con **PostgreSQL** al reconectarse, manteniendo trazabilidad y precisi√≥n en las operaciones.

---

## M√≥dulo 02 ‚Äì Inventario
**Decisi√≥n 1:**  
**T√≠tulo:**  
Actualizaci√≥n autom√°tica de stock mediante eventos de dominio

**Contexto:**  
El inventario debe reflejar en tiempo real los cambios provocados por ventas, compras o devoluciones. Se debe definir el mecanismo de sincronizaci√≥n entre m√≥dulos.

**Alternativas:**
- **Llamadas directas:** cada m√≥dulo actualiza el stock mediante endpoints espec√≠ficos.
- **Eventos de dominio:** las operaciones emiten eventos (`VentaConfirmada`, `CompraConfirmada`) que actualizan el stock autom√°ticamente.

**Criterios de elecci√≥n:**
- Trazabilidad.
- Consistencia de datos.
- Desacoplamiento entre m√≥dulos.
- Escalabilidad.

**Decisi√≥n:**  
Se utiliza **comunicaci√≥n basada en eventos de dominio** (Node EventEmitter) para mantener sincronizaci√≥n autom√°tica entre m√≥dulos.

**Sustento:**  
Los eventos desacoplan los m√≥dulos, garantizando consistencia de inventario y evitando duplicidad de operaciones. Este enfoque facilita la futura migraci√≥n a colas (RabbitMQ o Kafka) sin modificar la l√≥gica principal.

---

## M√≥dulo 03 ‚Äì Compras
**Decisi√≥n 1:**  
**T√≠tulo:**  
Gesti√≥n de √≥rdenes de compra e integraci√≥n autom√°tica con inventario

**Contexto:**  
El m√≥dulo de Compras gestiona adquisiciones, proveedores y actualizaci√≥n de stock. Se requiere determinar si la actualizaci√≥n debe ser manual o autom√°tica.

**Alternativas:**
- **Actualizaci√≥n manual:** el usuario ajusta el stock tras confirmar una compra.
- **Actualizaci√≥n autom√°tica:** la confirmaci√≥n de compra genera autom√°ticamente un evento que actualiza inventario.

**Criterios de elecci√≥n:**
- Precisi√≥n.
- Trazabilidad.
- Eficiencia operativa.

**Decisi√≥n:**  
Se implementa **actualizaci√≥n autom√°tica del stock** al confirmar una compra.

**Sustento:**  
La automatizaci√≥n elimina errores humanos y mejora la trazabilidad, garantizando que los movimientos de stock se reflejen instant√°neamente en la base de datos.

---

## M√≥dulo 04 ‚Äì Reportes
**Decisi√≥n 1:**  
**T√≠tulo:**  
Generaci√≥n de reportes desde backend con exportaci√≥n a PDF y Excel

**Contexto:**  
El m√≥dulo debe proveer reportes de ventas, compras y rentabilidad. Se debe definir d√≥nde se procesar√°n los c√°lculos y c√≥mo se generar√°n los archivos exportables.

**Alternativas:**
- **Backend:** genera reportes agregados y exportables (PDF/Excel).
- **Frontend:** genera reportes desde datos crudos.
- **Mixto:** backend procesa datos, frontend solo renderiza visualizaciones.

**Criterios de elecci√≥n:**
- Consistencia de datos.
- Carga del servidor.
- Tiempos de respuesta.
- Facilidad de exportaci√≥n.

**Decisi√≥n:**  
Los **reportes se generan en el backend**, con datos agregados y opci√≥n de exportar a PDF o Excel.

**Sustento:**  
Centralizar la generaci√≥n garantiza precisi√≥n y evita sobrecargar el cliente. Los reportes se procesan con **exceljs** y **pdfmake**, integrados en el backend.

---

## M√≥dulo 05 ‚Äì CRM y Atenci√≥n al Cliente
**Decisi√≥n 1:**  
**T√≠tulo:**  
Gesti√≥n de fidelizaci√≥n y reclamos mediante integraci√≥n con ventas y reportes

**Contexto:**  
El m√≥dulo CRM gestiona clientes, programas de puntos, reclamos y encuestas. Se debe definir el flujo de integraci√≥n con otros m√≥dulos del ERP.

**Alternativas:**
- **Integraci√≥n directa:** llamadas entre m√≥dulos.
- **Eventos asincr√≥nicos:** CRM escucha eventos de ventas (`VentaConfirmada`) o reclamos (`CasoCreado`).
- **Procesos separados:** CRM independiente con sincronizaci√≥n diaria.

**Criterios de elecci√≥n:**
- Sincronizaci√≥n en tiempo real.
- Reutilizaci√≥n de datos.
- Modularidad y trazabilidad.

**Decisi√≥n:**  
Se implementa **integraci√≥n mediante eventos asincr√≥nicos** que conectan CRM con los m√≥dulos de Ventas y Reportes.

**Sustento:**  
El modelo basado en eventos permite obtener m√©tricas de satisfacci√≥n y segmentar clientes sin afectar el rendimiento del sistema principal, manteniendo la consistencia entre datos de compra y comportamiento del cliente.

---

[üè† Home](../../../README.md) | [Siguiente ‚û°Ô∏è](../4.6.2/4.6.2.md)
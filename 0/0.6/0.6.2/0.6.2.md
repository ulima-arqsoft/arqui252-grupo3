> [0. Acerca del Grupo](../../0.md) ‚Ä∫ [0.6. Temas Individuales (Parte 1)](../0.6.md) ‚Ä∫ [0.6.2. Integrante 2](0.6.2.md)

# 0.6.2. Integrante 2

# Integraci√≥n API de DeepSeek

**Proyecto:** Integraci√≥n de terceros - API DeepSeek  
**Tecnolog√≠a:** Node.js + Express  

---
## Resumen

Este proyecto implementa una integraci√≥n completa con la API de DeepSeek para crear un sistema de chat conversacional. La soluci√≥n incluye un backend en Node.js con Express que maneja las peticiones a la API externa, y un frontend web que permite la interacci√≥n del usuario con el modelo de IA.

**Componentes principales:**
- Cliente HTTP para comunicaci√≥n con DeepSeek API
- Servidor Express con endpoint REST
- Interfaz web para chat interactivo
- Pruebas automatizadas

**Resultado:** Sistema funcional que permite enviar mensajes a DeepSeek y recibir respuestas de IA a trav√©s de una interfaz web.

---

## Introducci√≥n

La integraci√≥n de APIs de terceros se ha vuelto fundamental en el desarrollo de aplicaciones modernas. DeepSeek ofrece modelos de inteligencia artificial especializados a trav√©s de una API REST compatible con est√°ndares de OpenAI.

Este proyecto demuestra c√≥mo implementar una integraci√≥n robusta que incluye:
- Manejo seguro de credenciales
- Comunicaci√≥n HTTP con API externa  
- Interfaz de usuario para interacci√≥n
- Manejo de errores y validaciones

La implementaci√≥n utiliza Node.js como runtime, Express para el servidor web, y JavaScript vanilla para el frontend, creando una soluci√≥n completa y funcional.

---

## Implementaci√≥n

### 1. Configuraci√≥n del Cliente

Se implement√≥ un cliente para comunicarse con la API de DeepSeek usando el SDK de OpenAI (compatible):

```javascript
const OpenAI = require('openai');

function createClient({ apiKey, baseUrl } = {}) {
  const key = apiKey || process.env.DEEPSEEK_API_KEY;
  const base = baseUrl || process.env.DEEPSEEK_API_BASE || 'https://api.deepseek.com';
  
  if (!key) throw new Error('DEEPSEEK_API_KEY is required');

  const client = new OpenAI({ 
    apiKey: key, 
    baseURL: base 
  });

  async function simpleCompletion(prompt) {
    const resp = await client.chat.completions.create({
      model: 'deepseek-chat',
      messages: [{ role: 'user', content: prompt }],
      max_tokens: 1000,
      temperature: 0.7
    });
    return resp;
  }

  return { simpleCompletion };
}
```

### 2. Configuraci√≥n de Variables

```bash
DEEPSEEK_API_KEY=clave_api
DEEPSEEK_API_BASE=https://api.deepseek.com
```

### 3. Endpoint del Servidor

```javascript
app.post('/api/chat', async (req, res) => {
  try {
    const { message } = req.body;
    
    if (!message || message.trim() === '') {
      return res.status(400).json({ 
        success: false, 
        error: 'Message is required' 
      });
    }

    const response = await deepseekClient.simpleCompletion(message);
    
    res.json({ 
      success: true, 
      response: response,
      message: 'Chat completed successfully'
    });
    
  } catch (error) {
    res.status(500).json({ 
      success: false, 
      error: error.message 
    });
  }
});
```

### 4. Llamada desde Frontend

```javascript
async handleSubmit(e) {
  const message = this.messageInput.value.trim();
  
  try {
    const response = await fetch('/api/chat', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ message })
    });

    const data = await response.json();
    
    if (data.success) {
      const aiResponse = data.response.choices[0].message?.content;
      this.addMessage(aiResponse, 'ai');
    }
  } catch (error) {
    this.addMessage(`Error: ${error.message}`, 'error');
  }
}
```

## Estructura del Proyecto

```
src/
‚îú‚îÄ‚îÄ server.js          # Servidor Express con endpoints
‚îú‚îÄ‚îÄ openaiClient.js    # Cliente DeepSeek
‚îî‚îÄ‚îÄ run.js            # Script de prueba CLI

public/
‚îú‚îÄ‚îÄ index.html         # Interfaz web
‚îú‚îÄ‚îÄ app.js            # L√≥gica frontend
‚îî‚îÄ‚îÄ style.css         # Estilos

__tests__/
‚îî‚îÄ‚îÄ openaiClient.test.js  # Pruebas unitarias
```

## Pruebas

```javascript
describe('deepseekClient', () => {
  test('simpleCompletion returns data', async () => {
    const fakeData = { 
      choices: [{ message: { content: 'Respuesta de prueba' } }] 
    };
    
    OpenAI.mockImplementation(() => ({
      chat: {
        completions: {
          create: jest.fn().mockResolvedValue(fakeData)
        }
      }
    }));

    const client = createClient({ apiKey: 'test-key' });
    const res = await client.simpleCompletion('Hola');
    expect(res).toBe(fakeData);
  });
});
```

## Resultados

![alt text](/0/0.6/0.6.2/imgs/INTEGRACION_API.png)

---

[‚¨ÖÔ∏è Anterior](../0.6.1/0.6.1.md) | [üè† Home](../../../README.md) | [Siguiente ‚û°Ô∏è](../0.6.3/0.6.3.md)
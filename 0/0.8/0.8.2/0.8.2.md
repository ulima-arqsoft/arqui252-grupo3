> [0. Acerca del Grupo](../../0.md) â€º [0.8. Temas Individuales (Parte 2)](../0.8.md) â€º [0.8.2. Integrante 2](0.8.2.md)

# 0.8.2. Integrante 2 - Alonso Almerco Velita

# Chat en Tiempo Real con WebSockets. 

ComunicaciÃ³n en Tiempo Real mediante WebSockets (TÃ¡ctica ArquitectÃ³nica)


##  Desarrollo Conceptual

### Â¿QuÃ© es la ComunicaciÃ³n en Tiempo Real con WebSockets?

La comunicaciÃ³n en tiempo real mediante WebSockets es una tÃ¡ctica arquitectÃ³nica que permite establecer una conexiÃ³n bidireccional y persistente entre el cliente y el servidor. A diferencia del modelo tradicional HTTP request-response, WebSockets mantiene un canal abierto que permite el envÃ­o y recepciÃ³n de datos en cualquier momento.

**CaracterÃ­sticas principales:**

- **ConexiÃ³n persistente**: Una vez establecida, la conexiÃ³n permanece abierta hasta que uno de los extremos la cierre.
- **ComunicaciÃ³n bidireccional**: Tanto el cliente como el servidor pueden iniciar el envÃ­o de mensajes.
- **Baja latencia**: EliminaciÃ³n del overhead de crear nuevas conexiones HTTP para cada mensaje.
- **Eficiencia**: ReducciÃ³n significativa del uso de ancho de banda comparado con tÃ©cnicas de polling.

**Casos de uso tÃ­picos:**

- Aplicaciones de mensajerÃ­a instantÃ¡nea y chat
- Sistemas de notificaciones en tiempo real
- Dashboards con datos que se actualizan constantemente
- Juegos multijugador en lÃ­nea
- Aplicaciones colaborativas (editores de texto, pizarras)
- Seguimiento de ubicaciÃ³n en tiempo real

---

## Objetivos del Proyecto

Este proyecto demuestra la implementaciÃ³n prÃ¡ctica de WebSockets para:

1. **Establecer comunicaciÃ³n bidireccional**: Cliente y servidor se comunican sin restricciones de direcciÃ³n.
2. **Mantener conexiones persistentes**: Una sola conexiÃ³n maneja todo el ciclo de vida de la sesiÃ³n.
3. **Implementar broadcast eficiente**: Distribuir mensajes a mÃºltiples clientes simultÃ¡neamente.
4. **Gestionar estados de conexiÃ³n**: Manejar conexiones, desconexiones y errores de manera robusta.
5. **Demostrar uso sin abstracciones**: ImplementaciÃ³n pura con librerÃ­a `ws`, sin frameworks pesados.

---

## Arquitectura del Sistema

### Diagrama de Componentes

![Mi imagen](./imgs/diagramaComponentes.png)


### Capas del Sistema

| Capa | Responsabilidad | TecnologÃ­a | Componentes |
|------|----------------|------------|-------------|
| **PresentaciÃ³n** | Interfaz de usuario y experiencia | React + Vite | Login, Chat, Mensajes, Notificaciones |
| **ComunicaciÃ³n** | Protocolo WebSocket | WebSocket API / ws | ConexiÃ³n bidireccional persistente |
| **LÃ³gica de Negocio** | GestiÃ³n de usuarios y mensajes | Node.js | AutenticaciÃ³n, Broadcasting, Estado |

---

## Flujo de ComunicaciÃ³n WebSocket

### 1. Establecimiento de ConexiÃ³n

![Mi imagen](./imgs/DiagramaConexion.png)


### 2. Intercambio de Mensajes (Broadcasting)

![Mi imagen](./imgs/diagramaMensajes.png)


### 3. DesconexiÃ³n

![Mi imagen](./imgs/diagramaDesconexion.png)


---

## TecnologÃ­as Utilizadas

| Componente | TecnologÃ­a | VersiÃ³n | PropÃ³sito |
|------------|------------|---------|-----------|
| **Frontend Framework** | React | 18.2.0 | ConstrucciÃ³n de interfaz de usuario |
| **Build Tool** | Vite | 5.0.8 | Empaquetado y desarrollo rÃ¡pido |
| **Backend Runtime** | Node.js | 18+ | EjecuciÃ³n del servidor |
| **WebSocket Library** | ws | 8.14.2 | ImplementaciÃ³n del protocolo WebSocket |
| **Estilos** | CSS Custom Properties | - | Variables de diseÃ±o y tematizaciÃ³n |

---

## GuÃ­a de InstalaciÃ³n y EjecuciÃ³n

### 1. Requisitos Previos

Antes de comenzar, asegÃºrate de tener instalado:

- **Node.js** 
  - Verifica la instalaciÃ³n:
    ```powershell
    node -v
    npm -v
    ```

### 2. Clonar o Descargar el Proyecto

```powershell
cd C:\ruta\a\tu\proyecto\WebSocket
```

### 3. InstalaciÃ³n de Dependencias

#### Backend (Servidor WebSocket)

```powershell
cd backend

# Instalar dependencias
npm install
# - ws@^8.14.2 (librerÃ­a WebSocket)
```

#### Frontend (AplicaciÃ³n React)

```powershell
# Navegar a la carpeta del frontend
cd ..\frontend

# Instalar dependencias
npm install

```

### 4. Estructura de Carpetas del Proyecto

```
WebSocket/
â”‚
â”œâ”€â”€ backend/                    # Servidor WebSocket
â”‚   â”œâ”€â”€ server.js              # LÃ³gica principal del servidor
â”‚   â”œâ”€â”€ package.json           # Dependencias del backend
â”‚   â””â”€â”€ .gitignore
â”‚
â”œâ”€â”€ frontend/                   # AplicaciÃ³n React
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”œâ”€â”€ common/        # Componentes reutilizables
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Button.jsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Input.jsx
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ Card.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ chat/          # Componentes del chat
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ChatHeader.jsx
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ Message.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ Login.jsx      # Pantalla de login
â”‚   â”‚   â”‚   â”œâ”€â”€ Chat.jsx       # Pantalla principal del chat
â”‚   â”‚   â”‚   â””â”€â”€ Notification.jsx
â”‚   â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â”‚   â””â”€â”€ dateUtils.js   # Utilidades de fecha
â”‚   â”‚   â”œâ”€â”€ styles/
â”‚   â”‚   â”‚   â””â”€â”€ theme.css      # Variables CSS globales
â”‚   â”‚   â”œâ”€â”€ App.jsx            # Componente raÃ­z
â”‚   â”‚   â”œâ”€â”€ main.jsx           # Punto de entrada
â”‚   â”‚   â””â”€â”€ index.css          # Estilos globales
â”‚   â”œâ”€â”€ index.html
â”‚   â”œâ”€â”€ vite.config.js         # ConfiguraciÃ³n de Vite
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ .gitignore
â”‚
â””â”€â”€ README.md                   # Este archivo
```

### 5. Ejecutar el Servidor Backend

Abre una terminal (PowerShell o CMD) y ejecuta:

```powershell
cd backend
npm start
```

**Salida esperada:**
```
[Server] WebSocket server running on ws://localhost:8080
```

El servidor ahora estÃ¡ escuchando conexiones WebSocket en el puerto **8080**.

### 6. Ejecutar el Cliente Frontend

Abre **otra terminal** (mantÃ©n la del backend abierta) y ejecuta:

```powershell
cd frontend
npm run dev
```

### 7. Acceder a la AplicaciÃ³n

Abre tu navegador y visita:

```
http://localhost:3000
```

### 8. Probar la ComunicaciÃ³n en Tiempo Real

Para demostrar la funcionalidad completa del chat:

1. **Abre dos navegadores diferentes** (o dos ventanas en modo incÃ³gnito)
2. En ambos, navega a `http://localhost:3000`
3. **Usuario 1**: Ingresa un nombre y presiona "Entrar al Chat"
4. **Usuario 2**: Ingresa otro nombre y presiona "Entrar al Chat"
5. Observa cÃ³mo ambos reciben notificaciones de conexiÃ³n
6. EnvÃ­a mensajes desde cualquier usuario
7. Verifica que:
   - Los mensajes aparecen instantÃ¡neamente en ambas ventanas
   - Las notificaciones se muestran cuando llega un mensaje de otro usuario
   - Los mensajes propios se muestran a la derecha, los ajenos a la izquierda
### 1. Establecimiento de ConexiÃ³n

![Mi imagen](./imgs/demo1.png)


### 2. Intercambio de Mensajes (Broadcasting)

![Mi imagen](./imgs/demo2.png)


![Mi imagen](./imgs/demo3.png)

### 3. DesconexiÃ³n

![Mi imagen](./imgs/demo4.png)

---


## Consideraciones TÃ©cnicas

### ImplementaciÃ³n del Backend

El servidor backend utiliza la librerÃ­a `ws` que implementa el protocolo WebSocket (RFC 6455):

**CaracterÃ­sticas clave:**

- **GestiÃ³n de estado**: Utiliza un `Map<WebSocket, string>` para mantener la asociaciÃ³n entre conexiones y usuarios
- **Broadcasting**: FunciÃ³n centralizada que distribuye mensajes a todos los clientes conectados
- **Event-driven**: Responde a eventos de conexiÃ³n, mensaje, error y cierre
- **Sin estado en memoria volÃ¡til**: Los mensajes no se persisten, solo se transmiten en tiempo real

## Codigo
Link del repositorio de github: https://github.com/ulima-arqsoft/arqui252-alonso-almerco.git

Titulo del proyecto: WebSocket

---

[â¬…ï¸ Anterior](../0.8.1/0.8.1.md) | [ğŸ  Home](../../../README.md) | [Siguiente â¡ï¸](../0.8.3/0.8.3.md)
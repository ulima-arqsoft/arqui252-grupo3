> [9. MetodologÃ­a de DiseÃ±o de Arquitectura - AplicaciÃ³n de ADD](../9.md) â€º [9.1. RevisiÃ³n de Entradas](9.1.md)

# 9.1. RevisiÃ³n de Entradas

## Entrada al Proceso ADD

Esta secciÃ³n documenta las entradas fundamentales que guÃ­an el proceso de diseÃ±o arquitectÃ³nico mediante la metodologÃ­a ADD (Attribute-Driven Design) para el sistema InnovaLogix Retail ERP.

---

## 1. Requisitos Funcionales Priorizados

### RF-01: Registro de Ventas (Servicio POS)
**Prioridad:** Alta  
**DescripciÃ³n:** El sistema debe permitir el registro de ventas multiproducto con cÃ¡lculo automÃ¡tico de totales y generaciÃ³n de recibos en formato PDF mediante jsPDF.

**Casos de Uso Asociados:**
- CU-01: Registrar venta bÃ¡sica con mÃºltiples productos
- CU-02: Calcular subtotales e impuestos automÃ¡ticamente
- CU-03: Generar recibo PDF descargable
- CU-04: Procesar mÃ©todo de pago (efectivo/tarjeta)

---

### RF-02: Control de Inventario (Servicio Inventory)
**Prioridad:** Alta  
**DescripciÃ³n:** GestiÃ³n de catÃ¡logo de productos con control de stock en tiempo real, alertas de stock mÃ­nimo mediante WebSocket, y registro de movimientos (kardex).

**Casos de Uso Asociados:**
- CU-05: CRUD de productos con validaciones
- CU-06: Consultar stock disponible con cache
- CU-07: Visualizar kardex de movimientos histÃ³ricos
- CU-08: Recibir notificaciones de stock bajo en tiempo real

---

### RF-03: GestiÃ³n de Compras (Servicio Purchases)
**Prioridad:** Media  
**DescripciÃ³n:** AdministraciÃ³n de proveedores, registro de Ã³rdenes de compra, comparaciÃ³n de precios entre proveedores, y actualizaciÃ³n automÃ¡tica de stock al recepcionar mercaderÃ­a.

**Casos de Uso Asociados:**
- CU-09: CRUD de proveedores con validaciÃ³n de RUC
- CU-10: Crear orden de compra asociada a proveedor
- CU-11: Comparar precios entre proveedores
- CU-12: Recepcionar mercaderÃ­a y actualizar stock

---

### RF-04: Reportes y AnÃ¡lisis (Servicio Reports)
**Prioridad:** Media  
**DescripciÃ³n:** GeneraciÃ³n de reportes de ventas, comparaciÃ³n de temporadas, anÃ¡lisis de tendencias con visualizaciones, y dashboard con mÃ©tricas clave.

**Casos de Uso Asociados:**
- CU-13: Ver resumen de ventas con filtros de fecha
- CU-14: Comparar ventas entre temporadas
- CU-15: Visualizar grÃ¡ficos de tendencias de productos
- CU-16: Dashboard con mÃ©tricas en tiempo real

---

### RF-05: GestiÃ³n de Clientes (Servicio CRM)
**Prioridad:** Baja  
**DescripciÃ³n:** Registro de clientes, programa de lealtad con puntos, gestiÃ³n de reclamos, encuestas de satisfacciÃ³n, y notificaciones en tiempo real mediante WebSocket.

**Casos de Uso Asociados:**
- CU-17: CRUD de clientes con validaciÃ³n de DNI
- CU-18: Acumular y visualizar puntos de lealtad
- CU-19: Registrar y dar seguimiento a reclamos
- CU-20: Aplicar encuestas de satisfacciÃ³n

---

## 2. Atributos de Calidad (Escenarios QAW)

### QAW-01: Rendimiento - Cache de Productos
**EstÃ­mulo:** Usuario consulta catÃ¡logo de productos frecuentemente  
**Fuente:** Frontend haciendo requests al servicio Inventory  
**Artefacto:** node-cache en Inventory Service  
**Entorno:** OperaciÃ³n normal con mÃºltiples usuarios concurrentes  
**Respuesta:** Cache devuelve datos en memoria, reduce carga en PostgreSQL  
**MÃ©trica:** Hit rate >75%, tiempo respuesta <50ms con cache

---

### QAW-02: Disponibilidad - Notificaciones en Tiempo Real
**EstÃ­mulo:** Cambio en stock, nuevo cliente, venta completada  
**Fuente:** Servicios backend (Inventory, CRM, POS)  
**Artefacto:** Socket.IO para comunicaciÃ³n WebSocket  
**Entorno:** MÃºltiples clientes conectados simultÃ¡neamente  
**Respuesta:** Evento propagado a todos los clientes conectados instantÃ¡neamente  
**MÃ©trica:** Latencia <100ms, 100% de clientes notificados

---

### QAW-03: Seguridad - InyecciÃ³n SQL
**EstÃ­mulo:** Usuario malicioso intenta inyectar SQL en bÃºsquedas  
**Fuente:** Request HTTP con payload malicioso  
**Artefacto:** Consultas parametrizadas con pg (PostgreSQL driver)  
**Entorno:** ProducciÃ³n expuesta a internet  
**Respuesta:** Query parametrizada previene ejecuciÃ³n de SQL arbitrario  
**MÃ©trica:** 0 vulnerabilidades detectadas, 100% queries protegidas

---

### QAW-04: Escalabilidad - API Gateway
**EstÃ­mulo:** TrÃ¡fico distribuido entre mÃºltiples servicios  
**Fuente:** Frontend haciendo requests al Gateway  
**Artefacto:** API Gateway con express-rate-limit  
**Entorno:** MÃºltiples clientes concurrentes (10-20 usuarios)  
**Respuesta:** Gateway enruta a servicios correspondientes, aplica rate limiting  
**MÃ©trica:** 100 req/min por IP, 0 errores de routing

---

### QAW-05: Mantenibilidad - Arquitectura de Microservicios
**EstÃ­mulo:** Desarrollador necesita modificar servicio especÃ­fico  
**Fuente:** Equipo de desarrollo  
**Artefacto:** Servicios independientes con bases de datos separadas  
**Entorno:** Desarrollo local  
**Respuesta:** Cambios en un servicio no requieren rebuild de otros  
**MÃ©trica:** <4 horas para agregar endpoint nuevo, 0 dependencias cruzadas

---

## 3. Restricciones (Constraints)

### Restricciones TÃ©cnicas

**CON-01: Stack TecnolÃ³gico**
- **Frontend:** React 19.2 con Vite 7.2 (obligatorio por experiencia del equipo)
- **Backend:** Node.js 18+ con Express 5.1
- **Base de Datos:** PostgreSQL 15+ con driver pg (no ORM)
- **JustificaciÃ³n:** Equipo tiene experiencia en JavaScript full-stack, sin dependencias de ORMs pesados

**CON-02: Plataforma de Deployment**
- **Entorno:** Desarrollo local (localhost)
- **Frontend:** http://localhost:5173 (Vite dev server)
- **Gateway:** http://localhost:3000
- **Servicios:** Puertos 3001-3005
- **PostgreSQL:** Puertos 5432-5436 (5 instancias)
- **JustificaciÃ³n:** Proyecto acadÃ©mico, no requiere deployment en cloud

**CON-03: Compatibilidad de Navegadores**
- Soporte para Chrome 90+, Edge 90+, Firefox 88+ (Ãºltimas versiones)
- No soporta IE11
- **JustificaciÃ³n:** AplicaciÃ³n moderna, usuarios con navegadores actualizados

---

### Restricciones de Negocio

**CON-04: Presupuesto y Tiempo**
- Presupuesto: $0 (infraestructura local, sin costos de cloud)
- Tiempo de desarrollo: 1 semestre acadÃ©mico
- Equipo: Estudiantes de Arquitectura de Software

**CON-05: Arquitectura**
- Debe implementarse con microservicios (requisito acadÃ©mico)
- Base de datos por servicio (Database per Service pattern)
- API Gateway centralizado para enrutamiento

**CON-06: ComunicaciÃ³n**
- REST API para operaciones CRUD sÃ­ncronas
- WebSocket (Socket.IO) para notificaciones en tiempo real
- Sin message broker externo (RabbitMQ/Kafka) por simplicidad

---

## 4. Preocupaciones ArquitectÃ³nicas (Architectural Concerns)

### CRN-01: Modularidad con Microservicios
**DescripciÃ³n:** El sistema debe implementarse como 6 microservicios independientes (Gateway, Inventory, CRM, Purchases, POS, Reports) cada uno con su base de datos.  
**Impacto:** Afecta estructura de cÃ³digo, deployment, comunicaciÃ³n entre servicios, y consistencia de datos.

---

### CRN-02: ComunicaciÃ³n entre Servicios
**DescripciÃ³n:** Los servicios deben comunicarse eficientemente mediante REST API y WebSocket sin acoplamiento fuerte.  
**Impacto:** Requiere API Gateway para enrutamiento, Socket.IO para tiempo real, y manejo de errores de red.

---

### CRN-03: Seguridad en Distributed System
**DescripciÃ³n:** ProtecciÃ³n contra inyecciÃ³n SQL, rate limiting en Gateway, y validaciÃ³n de inputs en cada servicio.  
**Impacto:** Queries parametrizadas, CORS configurado, express-rate-limit, y logging de requests.

---

### CRN-04: Rendimiento con Cache
**DescripciÃ³n:** Sistema debe responder rÃ¡pido con mÃºltiples usuarios consultando productos frecuentemente.  
**Impacto:** node-cache en servicios crÃ­ticos (Inventory), Ã­ndices en PostgreSQL, y TTL optimizado.

---

### CRN-05: Disponibilidad con WebSocket
**DescripciÃ³n:** Notificaciones en tiempo real deben llegar a todos los clientes conectados instantÃ¡neamente.  
**Impacto:** Socket.IO en cada servicio, eventos entre backend y frontend, y manejo de desconexiones.

---

## 5. Decisiones ArquitectÃ³nicas Previas

**DEC-00: Arquitectura de Microservicios (DecisiÃ³n Previa)**
- **DescripciÃ³n:** Sistema implementado como 6 microservicios independientes con bases de datos separadas.
- **JustificaciÃ³n:** Requisito acadÃ©mico para demostrar conocimientos en arquitecturas distribuidas, separaciÃ³n de responsabilidades, y patrones de comunicaciÃ³n.
- **Consecuencias:** Mayor complejidad inicial, pero mejor escalabilidad, mantenibilidad independiente por servicio, y deployment granular.

---

## 6. Contexto del Sistema

### Stakeholders Clave

| Stakeholder | Rol | Preocupaciones |
|-------------|-----|----------------|
| Usuario Final | Operador | Facilidad de uso, rapidez en operaciones, interfaz intuitiva |
| Desarrolladores | Equipo TÃ©cnico | Mantenibilidad, documentaciÃ³n clara, separaciÃ³n de servicios |
| Profesor | Evaluador AcadÃ©mico | Correcta aplicaciÃ³n de patrones, arquitectura de microservicios |

---

### Contexto de Deployment

**Infraestructura local:**
- Frontend: Vite dev server en puerto 5173
- Gateway: Express en puerto 3000
- Inventory Service: Puerto 3001 con PostgreSQL en 5432
- CRM Service: Puerto 3002 con PostgreSQL en 5433
- Purchases Service: Puerto 3003 con PostgreSQL en 5434
- POS Service: Puerto 3004 con PostgreSQL en 5435
- Reports Service: Puerto 3005 con PostgreSQL en 5436
- Todo ejecutÃ¡ndose en localhost (sin Docker, sin Kubernetes)

---

## 7. PriorizaciÃ³n de Drivers ArquitectÃ³nicos

| ID | Driver | Tipo | Prioridad | IteraciÃ³n ADD |
|----|--------|------|-----------|---------------|
| QAW-01 | Rendimiento (Cache) | Calidad | Alta | IteraciÃ³n 1 |
| QAW-02 | Disponibilidad (WebSocket) | Calidad | Alta | IteraciÃ³n 1 |
| RF-01 | Registro de Ventas | Funcional | Alta | IteraciÃ³n 1 |
| RF-02 | Control de Inventario | Funcional | Alta | IteraciÃ³n 2 |
| QAW-03 | Seguridad (SQL Injection) | Calidad | Alta | IteraciÃ³n 2 |
| RF-04 | Reportes | Funcional | Media | IteraciÃ³n 3 |
| QAW-04 | Escalabilidad (Gateway) | Calidad | Media | Transversal |
| RF-05 | CRM | Funcional | Media | IteraciÃ³n 3 |

---

## 8. Resumen de Entradas

**Arquitectura:** 6 microservicios + API Gateway  
**Total de Requisitos Funcionales:** 20 casos de uso en 5 servicios  
**Total de Escenarios de Calidad:** 5 (QAW-01 a QAW-05)  
**Total de Restricciones:** 6 (CON-01 a CON-06)  
**Total de Preocupaciones:** 5 (CRN-01 a CRN-05)  
**Stack Principal:** React 19.2 + Node.js + Express 5.1 + PostgreSQL 15 + Socket.IO 4.8

**PrÃ³ximo Paso:** IteraciÃ³n 1 del proceso ADD enfocada en establecer la arquitectura de microservicios, priorizando los drivers de alta prioridad (QAW-01, QAW-02, RF-01, RF-02).

---

[ðŸ  Home](../../README.md) | [Siguiente âž¡ï¸](../9.2/9.2.md)